<section class="card">
  <div class="card-header">
    <h2>{{ isEditMode ? 'Edit User' : 'Add User' }}</h2>
    <a routerLink="/users" class="btn">Cancel</a>
  </div>

  <p *ngIf="successMessage" class="message success">{{ successMessage }}</p>
  <p *ngIf="errorMessage" class="message error">{{ errorMessage }}</p>

  <p *ngIf="loading">Loading user data...</p>

  <form [formGroup]="userForm" (ngSubmit)="onSubmit()" *ngIf="!loading" novalidate>
    <div class="field">
      <label for="name">Name</label>
      <input id="name" type="text" formControlName="name" />
      <small *ngIf="hasError('name', 'required')">Name is required.</small>
      <small *ngIf="hasError('name', 'maxlength')">Maximum length is 100 characters.</small>
    </div>

    <div class="field">
      <label for="email">Email</label>
      <input id="email" type="email" formControlName="email" />
      <small *ngIf="hasError('email', 'required')">Email is required.</small>
      <small *ngIf="hasError('email', 'email')">Enter a valid email address.</small>
      <small *ngIf="hasError('email', 'maxlength')">Maximum length is 150 characters.</small>
    </div>

    <div class="field">
      <label for="role">Role</label>
      <select id="role" formControlName="role">
        <option value="">Select role</option>
        <option *ngFor="let role of roles" [value]="role">{{ role }}</option>
      </select>
      <small *ngIf="hasError('role', 'required')">Role is required.</small>
      <small *ngIf="hasError('role', 'maxlength')">Maximum length is 50 characters.</small>
    </div>

    <button type="submit" class="btn btn-primary" [disabled]="saving">
      {{ saving ? 'Saving...' : (isEditMode ? 'Update User' : 'Create User') }}
    </button>
  </form>
</section>
